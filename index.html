<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π –¢–∞—Å–∫-–ú–µ–Ω–µ–¥–∂–µ—Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            /* –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–≤–µ—Ç–∞ –∏–∑ —Ç–µ–º—ã Telegram */
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            font-family: sans-serif;
            padding: 20px;
        }
    </style>
</head>
<body>
    <h1>üìã Mini App –ó–∞–¥–∞—á–Ω–∏–∫</h1>
    <p>–°—Ç–∞—Ç—É—Å: <span id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
    <p>–í–∞—à ID –≤ Telegram (–¥–ª—è –±—ç–∫–µ–Ω–¥–∞): <span id="user_id">N/A</span></p>

    <div id="task_list">
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
    </div>

    <button id="close_button" style="display:none;">–ó–∞–∫—Ä—ã—Ç—å Mini App</button>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Mini App
        if (window.Telegram && window.Telegram.WebApp) {
            const WebApp = window.Telegram.WebApp;

            // 1. –°–æ–æ–±—â–∞–µ–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
            WebApp.ready();

            // 2. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            const user = WebApp.initDataUnsafe.user;
            
            // 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Telegram –¥–ª—è UI
            WebApp.setHeaderColor('secondary_bg_color'); // –ò–∑–º–µ–Ω–∏–º —Ü–≤–µ—Ç —à–∞–ø–∫–∏
            WebApp.setBackgroundColor('bg_color');

            document.getElementById('status').textContent = '–£—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!';
            
            if (user) {
                document.getElementById('user_id').textContent = user.id;
            } else {
                document.getElementById('user_id').textContent = '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω';
            }

            // 4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
            const closeButton = document.getElementById('close_button');
            closeButton.style.display = 'block';
            closeButton.addEventListener('click', () => {
                WebApp.close(); // –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è
            });

        } else {
            document.getElementById('status').textContent = '–û—à–∏–±–∫–∞: –ó–∞–ø—É—â–µ–Ω–æ –Ω–µ –≤ Telegram Web App.';
        }
    </script>
</body>
</html>